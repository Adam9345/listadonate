(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{183:function(e,t,a){e.exports=a.p+"static/media/channels4_banner.7947a779.png"},184:function(e,t,a){e.exports=a.p+"static/media/youtube.ac11c287.png"},185:function(e,t,a){e.exports=a.p+"static/media/yt_chat.e2513289.png"},186:function(e,t,a){e.exports=a.p+"static/media/donate.166b2c38.png"},187:function(e,t,a){e.exports=a(417)},412:function(e,t,a){},414:function(e,t,a){},415:function(e,t,a){},416:function(e,t,a){},417:function(e,t,a){"use strict";a.r(t);a(188),a(203);var n=a(2),s=a.n(n),c=a(182),r=a.n(c),o=(a(412),a(48)),i=a.n(o),l=a(90),u=a(53),h=a(54),d=a(56),g=a(55),m=a(25),p=a(57),v=(a(414),a(415),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(g.a)(t).call(this,e))).state={messageLogin:"",messageDate:"",messageSelected:!1,storage_login:"",storage_date:""},a.onSelectMessage=a.onSelectMessage.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("message_date"),t=localStorage.getItem("message_login");this.setState({storage_login:t,storage_date:e})}},{key:"changeUrl",value:function(){return this.props.value.content.replace("https:","https://").replace("youtube.com","youtube.com/").replace("picosong.com","picosong.com/").replace("youtu.be","youtu.be/").replace("soundcloud.com","soundcloud.com/").replace("[...]","/")}},{key:"createMarkup",value:function(e){return{__html:"".concat(e)}}},{key:"onSelectMessage",value:function(e){if("Range"!==document.getSelection().type){var t=e.currentTarget.firstChild.firstChild.textContent,a=e.currentTarget.firstChild.nextSibling.firstChild.textContent;e.currentTarget.parentElement.childNodes.forEach(function(e){var t=e;t.classList.remove("selectDark"),t.classList.remove("selectLight")}),localStorage.setItem("message_login",t.toString()),localStorage.setItem("message_date",a.toString()),this.props.theme?e.currentTarget.classList.add("selectDark"):e.currentTarget.classList.add("selectLight"),this.setState({messageSelected:!this.state.messageSelect,messageLogin:t,messageDate:a})}}},{key:"render",value:function(){var e=this.props,t=e.value,a=e.theme,n=e.index,c=this.state,r=c.storage_login,o=c.storage_date,i=Math.fround(t.payment.amount_netto/100).toFixed(2),l=new Date(t.created_at),u=new Date;u.setDate(u.getDate()-1);var h=l.getDate()<10?"0".concat(l.getDate()):l.getDate(),d=l.getMonth()+1,g=d<10?"0".concat(d):d,m=l.getHours()<10?"0".concat(l.getHours()):l.getHours(),p=l.getMinutes()<10?"0".concat(l.getMinutes()):l.getMinutes(),v=l.getSeconds()<10?"0".concat(l.getSeconds()):l.getSeconds(),f="".concat(h,"-").concat(g,"-").concat(l.getFullYear()," ").concat(m,":").concat(p,":").concat(v),y=this.changeUrl(),b=y.match(/\bhttps?:\/\/\S+/),_=y.replace(b,'<a href="'.concat(b,'">').concat(b,"</a>")),w=t.login===r&&f===o?a?"selectDark":"selectLight":"";return s.a.createElement("div",{onClick:this.onSelectMessage,className:"".concat(w," message_container ").concat(a?"message_container_dark_theme":"")},s.a.createElement("div",{className:"message_flex"},s.a.createElement("div",{className:"message_login"},t.login),s.a.createElement("div",{className:"message_currency"},i," ",t.payment.currency)),s.a.createElement("div",{className:"message_flex"},s.a.createElement("div",{className:"message_date_prov"},f),s.a.createElement("div",{className:"message_date_prov"},"P\u0142atno\u015b\u0107: ",t.payment.provider)),s.a.createElement("div",{className:"message_content",dangerouslySetInnerHTML:this.createMarkup(_)}),s.a.createElement("div",{className:"numberOfDonate"},n+1))}}]),t}(s.a.PureComponent)),f=(a(416),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(g.a)(t).call(this,e))).toggleChange=a.toggleChange.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(h.a)(t,[{key:"toggleChange",value:function(){this.props.toggleChange()}},{key:"render",value:function(){return s.a.createElement("div",{className:"switch_container"},s.a.createElement("label",{className:"switch"},s.a.createElement("input",{type:"checkbox",checked:this.props.checked,onChange:this.toggleChange}),s.a.createElement("span",{className:"slider round"})))}}]),t}(n.Component)),y=a(183),b=a.n(y),_=a(184),w=a.n(_),k=a(185),S=a.n(k),C=a(186),E=a.n(C),O=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(g.a)(t).call(this,e))).yt_container=void 0,a.yt_video=void 0,a.yt_chat_container=void 0,a.yt_chat=void 0,a.yt_container=s.a.createRef(),a.yt_video=s.a.createRef(),a.yt_chat_container=s.a.createRef(),a.yt_chat=s.a.createRef(),a.state={isChecked:!0,limit:0,listLength:10,listOfMsgs:[],login:"",showButton:!1,isActiveList:!0,yt_clicked:!1,chat_clicked:!1,errorFetch:!1,videoId:""},a.toggleChange=a.toggleChange.bind(Object(m.a)(a)),a.fetchMessages=a.fetchMessages.bind(Object(m.a)(a)),a.scrollEvent=a.scrollEvent.bind(Object(m.a)(a)),a.scrollToTop=a.scrollToTop.bind(Object(m.a)(a)),a.showYt=a.showYt.bind(Object(m.a)(a)),a.showChat=a.showChat.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){localStorage.getItem("dark_theme")&&this.setState({isChecked:JSON.parse(localStorage.getItem("dark_theme")||"")}),document.title="Lista donate: brudna-malpa",this.fetchMessages(),window.addEventListener("scroll",this.scrollEvent,!0)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.scrollEvent,!0)}},{key:"scrollEvent",value:function(){window.scrollY>window.innerHeight?this.setState({showButton:!0}):this.setState({showButton:!1})}},{key:"fetchMessages",value:function(){var e=this,t={calls:[{method:"POST",params:{limit:1,login:"brudna-malpa",offset:0},url:"/user/page/getMessagesByLogin"}],lang:"pl",token:"0"},a="https://prod.tipanddonation.com/api/core/batchcall";try{fetch(a,{body:JSON.stringify(t),headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},method:"POST"}).then(function(e){return e.json()}).then(function(n){var s=n[t.calls[0].url].data.results,c=n[t.calls[0].url].data.data[0].created_at,r=Number(c.substring(0,4)),o=Number(c.substring(5,7)),u=Number(c.substring(8,10)),h=Number(c.substring(11,13)),d=Number(c.substring(14,16)),g=Number(c.substring(17,19)),m=(/Trident\/|MSIE/.test(window.navigator.userAgent)?new Date(r,o,u,h,d,g):new Date(c)).getFullYear()!==(new Date).getFullYear();function p(){return(p=Object(l.a)(i.a.mark(function e(){var n,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.calls[0].params.limit=150,/Trident\/|MSIE/.test(window.navigator.userAgent)||(t.calls[0].params.offset=m?s-150:0),e.next=4,fetch(a,{body:JSON.stringify(t),headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},method:"POST"});case 4:return n=e.sent,e.next=7,n.json();case 7:return c=e.sent,e.abrupt("return",c[t.calls[0].url].data.data);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}(function(){return p.apply(this,arguments)})().then(function(t){var a=e.filterDonatesFromTwoDays(t);e.setState({listOfMsgs:m?a?a.reverse():[]:a})})}).catch(function(t){console.log(t),e.setState({errorFetch:!0})})}catch(n){}}},{key:"filterDonatesFromTwoDays",value:function(e){var t=new Date,a=new Date;return a.setDate(a.getDate()-1),e&&e.filter(function(e){var n=e.created_at,s=Number(n.substring(0,4)),c=Number(n.substring(5,7)),r=Number(n.substring(8,10)),o=Number(n.substring(11,13)),i=Number(n.substring(14,16)),l=Number(n.substring(17,19)),u=/Trident\/|MSIE/.test(window.navigator.userAgent)?new Date(s,c,r,o,i,l):new Date(e.created_at);return t.getDate()===u.getDate()||a.getDate()===u.getDate()})}},{key:"renderMsgs",value:function(){var e=this,t=this.state.listOfMsgs;return t.length>0?t.map(function(a,n){return s.a.createElement(v,{key:n,value:a,theme:e.state.isChecked,index:t.length-1-n})}):s.a.createElement("div",{style:{fontSize:"2em"}})}},{key:"toggleChange",value:function(){var e=this;this.setState({isChecked:!this.state.isChecked},function(){localStorage.setItem("dark_theme",e.state.isChecked.toString())})}},{key:"scrollToTop",value:function(){window.scroll({top:0,behavior:"smooth"})}},{key:"showOrHide",value:function(e,t,a,n,s,c){e?t&&(t.classList.add(s),t.classList.remove(n)):t&&a&&(t.classList.add(n),t.classList.remove(s),""===a.src&&(a.src=c))}},{key:"showYt",value:function(){var e=this.yt_container.current,t=this.yt_video.current;e&&t&&this.showOrHide(this.state.yt_clicked,e,t,"show_yt","hide_yt","https://www.youtube.com/embed/live_stream?channel=UC_Cxtw8qwDYOodWxQw0e-yA&amp;autoplay=true&iv_load_policy=3&modestbranding=1&rel=0"),this.setState({yt_clicked:!this.state.yt_clicked})}},{key:"getLiveId",value:function(){var e=Object(l.a)(i.a.mark(function e(){var t,a,n,s,c,r,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t=atob("VVYzOXdyWTNpSHVrQ0dxbldFRTZJU0R2T2JaNVdiWEJCeVNheklB"),a="",n=t.length-1;n>=0;n--)a+=t[n];return e.next=5,fetch("https://www.googleapis.com/youtube/v3/search?part=snippet&channelId=UC_Cxtw8qwDYOodWxQw0e-yA&eventType=live&maxResults=10&order=date&regionCode=PL&type=video&key=".concat([a]));case 5:return s=e.sent,e.next=8,s.json();case 8:if(!((c=e.sent).items.length<=0)){e.next=19;break}return e.next=12,fetch("https://www.googleapis.com/youtube/v3/search?part=snippet&channelId=UC_Cxtw8qwDYOodWxQw0e-yA&eventType=upcoming&maxResults=10&order=date&regionCode=PL&type=video&key=".concat([a]));case 12:return r=e.sent,e.next=15,r.json();case 15:(o=e.sent).items.length<=0?this.setState({videoId:""}):this.setState({videoId:o.items[0].id.videoId}),e.next=20;break;case 19:this.setState({videoId:c.items[0].id.videoId});case 20:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"showChat",value:function(){var e=Object(l.a)(i.a.mark(function e(){var t,a,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==this.state.videoId){e.next=3;break}return e.next=3,this.getLiveId();case 3:t="https://www.youtube.com/live_chat?v=".concat(this.state.videoId,"&embed_domain=").concat(window.location.hostname),a=this.yt_chat_container.current,n=this.yt_chat.current,a&&n&&this.showOrHide(this.state.chat_clicked,a,n,"show_yt_chat","hide_yt_chat",t),this.setState({chat_clicked:!this.state.chat_clicked});case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.isChecked,a=e.showButton;return s.a.createElement("div",{className:"App ".concat(t?"dark_theme":"light_theme")},s.a.createElement("div",{className:"banner_container"},s.a.createElement("img",{onClick:this.showYt,className:"banner_icon yt_logo_icon",src:w.a,alt:"yt_logo"}),s.a.createElement("a",{className:"tadLink",href:"https://tipanddonation.com/brudna-malpa",target:"_blank",rel:"noopener noreferrer"},s.a.createElement("img",{src:E.a,alt:"tipanddonation icon"})),s.a.createElement("img",{className:"banner",src:b.a,alt:"brudna_malpa_banner"}),s.a.createElement("img",{onClick:this.showChat,className:"banner_icon chat_yt_logo",src:S.a,alt:"yt_chat_logo"})),s.a.createElement("div",{className:"yt_container",ref:this.yt_container},s.a.createElement("iframe",{ref:this.yt_video,className:"yt_video",title:"youtube",allowFullScreen:!0,frameBorder:"0"})),s.a.createElement("div",{className:"yt_chat_container",ref:this.yt_chat_container},s.a.createElement("iframe",{ref:this.yt_chat,className:"chat_embed",title:"youtube_chat",frameBorder:"0"})),s.a.createElement(f,{checked:t,toggleChange:this.toggleChange}),this.state.listOfMsgs.length>0?s.a.createElement("div",{className:"page-container"},this.renderMsgs()):s.a.createElement("div",null,this.state.errorFetch&&s.a.createElement("div",null,"B\u0142\u0105d \u0142adowania danych z API")),s.a.createElement("div",{onClick:this.scrollToTop,className:"arrow-up ".concat(t?"arrow-up-dark-theme":""),style:{display:a?"block":"none"}},"\u2191"))}}]),t}(s.a.PureComponent);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[187,1,2]]]);
//# sourceMappingURL=main.ed35eece.chunk.js.map